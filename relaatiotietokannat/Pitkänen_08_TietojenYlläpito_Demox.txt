
/* Tässä tehtäväsarjassa viedään tietosisältöä vanhoista tauluista uusiin 
   tauluihin. YLLÄPITOLAUSEET ajetaan siis uusiin tauluihin */

-- MUISTA MIETTIÄ LOOGINEN RATKAISU ENNE SQL_LAUSEEN KIRJOITTAMISTA!!!!!

/* Yp_1: DOKUMENTOI seuraavissa tehtävissä tehtävä tietojen siirto. 
	Missä järjestyksessä veit tiedot? Saitko mahdollisia 
	virheilmoituksia? kopioi ne. Mitä virheilmoitus merkitsi? 
	Miten pääsit siitä eteenpäin?*/


/* Yp_2: Vie UUSI_ASIAKAS, UUSI_TILAUS, UUSI_TILAUSRIVI, UUSI_TUOTE, UUSI_TUOTERYHMA ja POSTI-tauluihisi 
      	tiedot vanhoista tauluista. Tee siis useampi sql-lause. 

	HUOM! Jos olet määritellyt tauluihin viiteavainmääritykset, 
	tietot pitää viedä tauluihin niin, että lapsitauluun tietoja vietäessä
	isätaulussa on jo se rivi, mihin lapsitaulusta viitataan.

	Huomaa, että omissa tauluissasi on myös sarakkeita, joita ei ole yhteisissä tauluissa.
	Vie niihin sopivat tiedot vanhoista tauluista. */

INSERT INTO uusi_asiakas
	SELECT astunnus, asnimi, yhteyshlo, postinro, asvuosi
	FROM asiakas

INSERT INTO uusi_tilaus
	SELECT tilausnro, astunnus, tilauspvm, tapa, tila, null
	FROM tilaus

INSERT INTO uusi_tuoteryhma
	SELECT *
	FROM tuoteryhma

INSERT INTO uusi_tuote
	SELECT *
	FROM tuote

INSERT INTO uusi_tilausrivi
	SELECT *
	FROM tilausrivi


/* Yp_3: Lisää Posti-tauluun rivit 15500, Lahti ja 00200, Helsinki. */

SELECT * FROM posti

INSERT INTO posti
VALUES ("15500", "Lahti"),
	("00200", "Helsinki")


/* Yp_4: Lisää omaan Asiakas-tauluusi uusi asiakas AROLA Arola Oy, 
jonka postinumero on 15500 ja asiakkaaksitulovuosi on kuluva vuosi. 
Tarkista menikö rivi tauluun.*/

INSERT INTO uusi_asiakas
	VALUES ("AROLA", "Arola Oy", Null, "15500", "2021")

/* Yp_5: Lisää edellisessä tehtävässä tallentamallesi uudelle asiakkaalle 
yhteyshenkilö. Hänen nimensä on Kortes. */

UPDATE uusi_asiakas
SET yhteyshlo = "Kortes"
WHERE astunnus = "AROLA"

/* Yp_6: Poista tilauksen 209 kolmas rivi. */

DELETE FROM uusi_tilausrivi
WHERE tilausnro = "209" AND rivinro = "3"

/* Yp_7: Lisää uusi tuote Hikinauha, laita tuotenumeroksi 8.  
- Taulumäärityksistäsi riippuu pitääkö sinun määritellä myös mihin 
tuoteryhmään tuote kuuluu. */

INSERT INTO uusi_tuote
	VALUES("8", "Hikinauha", null, null, "11")

/* YP_8: Lisää edellä lisäämällesi tuotteelle hinnaksi 10 € ja 
kustannuksiksi 4 €. */

UPDATE uusi_tuote
SET hinta = "10", kustannus = "4"
WHERE tuotenro = "8"

/* Yp_9: Lisää uusi tuoteryhmä: 15, Kalastus */

INSERT INTO uusi_tuoteryhma
	VALUES ("15", "Kalastus")

/* Yp_10: Lisää edellä lisättyyn tuoteryhmään kuuluvat tuotteet:  
	Siikaperho, hinta 9€ ja  Ahvenpilkki, hinta 12 €. */

INSERT INTO uusi_tuote
	VALUES ("9", "Siikaperho", "9", null, "15"),
    		("10", "Ahvenpilkki", "12", null, "15" )

/* Yp_11: Arola tilaa 100 kpl Ahvenpilkkeja ja 150 kpl Siikaperhoja. 
	Päivitä tietokantaasi tiedot tästä tilauksesta. */

INSERT INTO uusi_tilaus
	VALUES ("210", "AROLA", "2021-10-25 00:00:00", "V", null, "2021-10-25 00:00:00")

INSERT INTO uusi_tilausrivi
	VALUES ("210", "1", "10","50"), ("210", "2", "9","150")

/* Yp_12: Korota kaikkien tuoteryhmän 12 tuotteiden hintoja 5%. */

UPDATE uusi_tuote
SET hinta = hinta * 1.05
WHERE trnro = 12


-- LISÄTEHTÄVÄT:
-- =============

/* Yp_ 13: Keksi aiheeseen liittyen 2 todellisen tuntuista tehtävää ja 
tee niitä vastaavat sql-lauseet. */


/* Yp_14: Etsi netistä asiaan liittyvä hyvä ohje tai esimerkki. Laita linkki sinne. */

